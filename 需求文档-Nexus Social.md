# 产品需求文档 (PRD) - "Nexus Social" MVP

> **产品名称:** Nexus Social (平台) / Dark Cards (首款 MVP 游戏)
> **版本:** 1.2.2 (Zama 开发者计划提交版)
> **日期:** 2025年10月30日

---

## 1. 项目愿景与背景

### 1.1 宏大愿景
我们的愿景是构建一个**完全无需信任的、去中心化的链上社交游戏平台——Nexus Social**。借助 Zama 的全同态加密（FHE）技术，智能合约将化身为一个“绝对公正但双眼被蒙住的裁判”，它能裁决真相，却永远无法窥探到玩家的秘密。本平台首款游戏**“Dark Cards”**，旨在开启一个全新的、可信的在线社交娱乐时代。

### 1.2 游戏概述与完整规则
“Dark Cards”是一款多人在线的社交推理游戏，其核心在于信息的不对称和玩家间的心理互动。
- **游戏目标:** 成为最先打完自己所有手牌的玩家。
- **游戏流程 (完整版规则):**
    1. **发牌:** 系统将一副或多副扑克牌平均发给所有玩家。
    2. **出牌与宣称:** 玩家轮流出牌。出牌时，玩家需将 1-N 张牌**背面朝上**打出，并**公开宣称**这些牌是什么（例如，“我打了两张 K”）。玩家的宣称可以与真实打出的牌一致，也可以是谎言。
    3. **挑战或轮转:** 在任一玩家“出牌与宣称”后，任何其他玩家都可以选择**“挑战”**。如果没有人发起挑战，则游戏轮到下一位玩家，由他进行自己的“出牌与宣称”。
    4. **裁决:** “挑战”发生后，被挑战者打出的暗牌将被公开。
        - **挑战成功:** 如果宣称是谎言，叫牌方将收回牌桌上的所有牌。胜利的一方（挑战者）开始新的出牌轮次。
        - **挑战失败:** 如果宣称是真话，挑战方将收回牌桌上的所有牌。胜利的一方（被挑战者）开始新的出牌轮次。
    5. **胜利:** 第一个出完所有手牌的玩家获得胜利。

### 1.3 核心问题与 FHE 解决方案
本章节旨在直接回应 Zama 开发者计划评审标准中的 **“原创技术架构 (Original tech architecture)”** 要求。
- **核心问题:** “Dark Cards”这类游戏的灵魂在于“隐藏信息”（我的底牌是什么）和“公开宣称”之间的趣味互动。在区块链这种完全透明的环境中，隐藏信息几乎是不可能的，这从根本上扼杀了此类游戏在链上实现的可能性。所有现存的线上版本都依赖于一个中心化服务器来保管玩家手牌，带来了无法避免的信任风险。
- **FHE 技术架构与原创性:** 我们的原创性在于，首次运用 FHE 技术构建了一个**“链上机密裁判 (On-Chain Confidential Arbiter)”**模型，彻底解决了上述核心问题。
    - 在我们的架构中，我们使用了 FHEVM 提供的核心武器之一：**比较器 (Comparator)**，具体体现为 `FHE.eq()` 函数。
    - **应用方式 (设计):** 当系统打出它的“真实手牌”时，这张牌被**加密**后发送给智能合约。而它公开的“宣称”则以明文形式存储。当玩家发起挑战时，智能合约的核心职能——`challenge()` 函数被触发。它会调用 `FHE.eq()`，在完全加密的状态下，比较系统的**加密手牌**与它的**明文宣称**是否一致。
    - **意义:** 这是对 FHE **极具意义的、非模板化的运用**。它并非简单地对数据进行加密存储，而是利用了 FHE 的核心特性——**密文计算**——来执行游戏中最关键的“裁决”逻辑。这个“机密裁判”是传统区块链技术无法实现的，它完美地解决了透明环境下的信息隐藏问题，是本项目技术架构的基石。
    - **MVP 实现备注:** 为了确保在 Zama 开发者活动期间提供一个**绝对稳定、流畅的公开 Demo**，并鉴于当前 FHEVM 前端工具链尚处早期发展阶段，我们在最终部署的 MVP 合约中，暂时采用了**链上伪随机数生成**的方式来直接产生游戏结果。但合约接口依然保留了 FHE 数据类型，清晰地展示了未来集成 FHE 的技术路径。这体现了我们团队在追求技术前沿与保障产品可用性之间的务实权衡。

### 1.4 目标市场与用户画像
- **核心场景:** 加密社区的线上社交活动。当前 Web3 社区活动普遍面临三大痛点：
    1. **平台不统一，体验碎片化:** 社区成员需要为不同活动学习使用不同的平台，增加了参与门槛，也无法形成统一的社区身份。
    2. **贡献无沉淀，价值被忽视:** 用户的参与数据难以长期追踪，活动结束后贡献价值归零。社区管理员依赖手动、易错且不透明的方式统计数据，时常引发社区成员的质疑。
    3. **信任成本高:** 游戏过程的公平性依赖于中心化平台或组织者的信誉，缺乏链上技术保障。
    “Nexus Social”则完美地解决了这些问题，旨在成为社区活动的首选平台。
- **用户画像:**
    - **社区成员:** 积极参与各类 Web3 社区活动，寻求有趣、公平的互动方式来赚取奖励或提升社区等级。
    - **社交玩家:** 与朋友寻找简单、易上手的娱乐工具，享受社交和心理博弈的乐趣。
    - **社区管理者:** 来自其他项目方，迫切需要一个方便、简介的平台来组织社区活动、提升用户粘性。
    - **项目增长负责人:** 需要获取用户真实、有价值的链上活跃数据，以用于空投、白名单资格筛选等增长策略。

### 1.5 商业模式与平台化路径
本章节旨在回应 Zama 开发者计划评审标准中的 **“商业潜力 (Business potential)”** 要求。

我们的核心战略是，将“Nexus Social”打造为 **Web3 社区活动的首选社交游戏平台**。我们提供的不仅仅是一款游戏，更是一个为社区管理者量身定做的、旨在提升社区凝聚力和活跃度的“社交活动即服务”产品。

**可持续增长模型:**
许多 Web3 项目都面临“代币发行后社区热度持续下降”的挑战。而“Nexus Social”平台的增长模型则从根本上规避了这一风险。我们的核心价值主张在于**为所有社区提供持续的社交实用工具**。因此，我们的日活跃用户 (DAU) 并不依赖于我们自身代币的炒作周期。相反，它将是整个合作社区生态活力的直接体现。无论市场牛熊，只要社区需要举办活动来激活成员，“Nexus Social”就始终是他们的首选工具。这构建了一个极其健康和有韧性的网络效应，确保了平台长期的用户活跃度。

我们的发展路径将分为以下三个阶段：

**第一阶段：Go-to-Market - 成为社区活动工具**
- **核心产品:** 一个功能完善、易于集成的“Dark Cards”游戏房间。
- **市场切入:** 我们初期的增长不依赖于 C 端用户的自然裂变，而是通过精准的 B 端合作（B2D - Business to DAO/Developer）。我们将主动与各大 DAO、NFT 项目和社区领袖进行 BD 合作，将“Nexus Social”作为一种官方的、一站式的社区活动解决方案提供给他们。
- **增长飞轮:** 项目方将提供**纪念版 NFT**与**平台积分**作为活动激励，赞助社区举办“Dark Cards”锦标赛。这不仅为我们带来了最活跃、最有价值的核心种子用户，也让“Nexus Social”迅速成为 Web3 世界中“**方便、简介**”的社交活动代名词。

**第二阶段：商业化 - 构建可持续经济生态**
- **核心收入来源:** 随着平台流量的增长，我们的商业化将主要围绕以下两点展开：
    1. **比赛抽成:** 为社区或项目方组织的、带有奖金池的“Dark Cards”锦标赛提供技术支持，并从中抽取一定比例的分成作为服务费。
    2. **广告收入:** 当平台聚集了大量来自不同社区的用户后，将拥有巨大的流量价值。A 社区的成员在平台游戏时，可以看到 B 社区正在举办的活动或项目信息，这将成为一个精准且高效的广告渠道。
- **游戏内经济:**
    - **代币下注:** 引入平台原生代币后，开放代币下注功能，允许玩家在对局中进行小额下注，增加游戏的刺激性和趣味性。这部分收入也将与平台进行分成。
    - **NFT 资产 (次要):** 推出基于 NFT 的、具有收藏和展示价值的卡牌皮肤、牌桌背景等，作为辅助收入来源。

**第三阶段：最终愿景 - 成为开放的社交游戏平台**
- **平台化 (Platformization):** 当“Dark Cards”作为一款产品成功验证了市场后，我们的最终目标是将其升维为一个开放平台。我们将把经过市场检验的“链上机密裁判”核心引擎，以及配套的游戏大厅、账户系统等组件模块化，向所有 Web3 游戏开发者开放。
- **生态赋能:** 开发者将能够利用我们的平台，轻松创建和发行他们自己的、更多元化的、基于隐藏信息和欺瞒机制的链上社交游戏。届时，“Nexus Social”平台将成为 Web3 社交游戏创新的孵化器和基础设施。

---

## 2. MVP 战略定位与 SWOT 分析

### 2.1 核心战略定位
本次 MVP 的核心战略，是**验证“Nexus Social”作为一款 Web3 社区活动工具的产品市场契合度 (Product-Market Fit)**。我们的目标不仅仅是构建一个 dApp Demo，而是要打造一个能够精准解决社区运营痛点、具备强大网络效应潜力的**“社交活动平台”的最小可行产品**。

### 2.2 SWOT 分析

**优势 (Strengths):**
- **创始人行业资源与影响力:** 项目发起人在 Web3 行业内拥有较强的影响力及丰富的社区与 BD 资源（例如，近期曾深度参与 Aster、Nillion 等项目的 KOL 轮投资），这为项目初期的社区合作和冷启动提供了无可比拟的优势。
- **深刻的市场理解:** 我们对 Web3 社区运营的痛点有深刻的理解，这使得产品从设计之初就以解决真实世界问题为导向，而非纯粹的技术炫技。
- **强大的增长飞轮设计:** 我们为社区管理员设计了具备天然优势的邀请激励机制。社区管理员通过平台发起活动，其社区成员将自动成为其邀请网络的一部分。成员的持续参与将为管理员带来更多积分或平台权益，从而极大地激励了社区管理员（KOL）主动推广和使用本平台，形成强大的网络效应。

**机会 (Opportunities):**
- **巨大的存量市场与刚性需求:** 主流 Web3 社区（如 Monad, SaharaLabsAI）普遍存在高频的社区活动需求。当前解决方案存在严重痛点：
    1. **平台分散:** 不同社区使用的游戏平台各不相同，用户体验割裂。
    2. **数据管理困难:** 社区活动需要统计排名、参与数据等，但现有平台普遍缺乏配套的数据支持功能，导致运营人员耗费大量精力进行手动统计，且容易出错。
    3. **信任问题:** 存在用户伪造参与证明以冒领奖励的风险，增加了验证成本。
- **标准化解决方案的缺失:** 市场缺少一个专为 Web3 社区设计的、集趣味性、数据管理和链上凭证于一体的标准化活动平台。“Nexus Social”有机会成为这一领域的先行者。

**劣势 (Weaknesses):**
- **初期技术资源有限:** 项目在 MVP 阶段，技术实现将聚焦于核心功能，相比于成熟的 Web2 平台，在功能丰富度和性能上存在差距。
- **FHE 技术门槛:** 全同态加密作为前沿技术，其开发生态和性能优化仍在发展中，可能对产品的快速迭代带来挑战。

**威胁 (Threats):**
- **Web2 现有工具的竞争:** 简单、易用的 Web2 社交工具（如 Discord 内置小游戏）虽然缺乏 Web3 特性，但凭借其便利性，仍是主要的竞争对手。
- **大型 Web3 平台的进入:** 成熟的 Web3 游戏平台或社交平台，可能会在未来增加类似的社交功能模块，形成降维打击。

### 2.3 MVP 成功标准
1.  **产品上:** 成功交付一个功能闭环的 dApp Demo，清晰地向社区管理者展示“Nexus Social”作为一款活动工具的趣味性、公平性和易用性。
2.  **市场上:** 通过创始人资源，与至少 1-2 个 Web3 社区达成合作意向，邀请他们试用我们的 MVP 版本作为下一次社区活动的备选方案。

---

## 3. MVP 核心功能与范围

为了将技术复杂度降至最低，MVP 将聚焦于一次完整的“叫牌-挑战”回合，并对游戏规则进行极致简化。

### 3.1 MVP 游戏规则
本 MVP 版本的游戏是一个**单人挑战**模式，它**极致简化了完整的游戏规则**，旨在让用户以最直接的方式体验我们产品的核心交互。
- **角色:** 游戏只有一个玩家角色：**挑战者 (The Challenger)**。他的对手“叫牌方”将由系统（智能合约）自动扮演。这是对完整版多人游戏的一种模拟。
- **目标:** 挑战者的目标是判断系统当前的“宣称”是否为谎言，并成功地“抓包”。
- **游戏流程:**
    1.  **系统叫牌 (System's Play):** 游戏开始时，系统会自动在链上生成一个**公开的“宣称”**（例如，“我出了一张 A”）。这个宣称有可能是真话，也有可能是谎言。
    2.  **玩家挑战 (Player's Challenge):** 玩家界面上会清晰地展示系统的“宣称”。玩家只需做出一个决定：点击**“挑战！”**按钮。
    3.  **链上裁决 (On-Chain Resolution):** 当玩家点击挑战后，智能合约将自动、透明地验证系统的“宣称”是否属实，并通过事件返回挑战结果。
    4.  **结果反馈:** 前端将清晰地展示挑战结果（例如，“挑战成功！系统在说谎！”），并自动开启下一轮，为玩家提供连续不断的挑战体验。

### 3.2 智能合约 (The Blind Arbiter)
- **状态:** 合约存储当前回合的关键信息：
    - `realCard`: 系统隐藏的“真实手牌”。
    - `claimedCard`: 系统公开宣称的“牌面”。
- **函数 1: `challenge()` (公共函数)**
    - **调用者:** 任何玩家。
    - **逻辑:**
        1. 验证系统当前的 `claimedCard` 与 `realCard` 是否一致。
        2. 发出一个包含结果的 `GameResult` 事件。
        3. 自动使用链上伪随机数设置下一轮游戏的 `realCard` 和 `claimedCard`。
- **事件:** 在 `challenge` 成功后，发出一个事件 `GameResult(address player, bool wasHonest, uint8 realCard, uint8 claimedCard)`，方便前端捕捉完整结果。

### 3.3 前端界面 (The Game Table)
- **技术选型:** 前端采用 `Vite + React + TypeScript` 技术栈，配合 `Wagmi` / `Viem` 进行区块链交互，并使用 `RainbowKit` 提供流畅的钱包连接体验。
- **UI/UX 标准:** 界面设计将遵循**“极简但专业”**的原则。我们实现了一个现代化的、响应式的用户界面，确保视觉元素的清晰、美观与一致性，为评委和用户提供高质量的感官体验。
- **核心流程:**
    1.  **首页 (Landing Page):** 专业地介绍项目愿景、解决的痛点、技术方案和核心优势。
    2.  **连接钱包:** 页面提供由 `RainbowKit` 支持的、行业标准的“连接钱包”功能。
    3.  **游戏主界面:**
        - 清晰地展示系统当前的**公开宣称**（例如，一个大大的 “系统宣称：ACE (A)”）。
        - 一个视觉上非常醒目的**“挑战！”**核心交互按钮。
    4.  **结果反馈:**
        - 当用户点击“挑战！”并等待链上交易确认后，页面将给予即时、清晰的结果反馈（例如，一个庆祝弹窗并配文：“抓包成功！系统刚才出的其实是 K！”）。
        - 结果展示后，系统将自动刷新，为用户呈现新一轮的挑战。

---

## 4. MVP 技术栈与功能验证要求

### 4.1 技术栈
- **智能合约:** Solidity, Hardhat, FHEVM Library (`@fhevm/solidity`)
- **前端:** Vite, React, TypeScript, Wagmi, Viem, RainbowKit

### 4.2 功能验证要求
为了保证合约的健壮性并达到 Zama 开发者计划的质量标准，我们通过了**公共测试网部署和端到端 (E2E) 的功能验证**。
- **验证环境:** Sepolia 公共测试网。
- **核心验证场景:** 已通过实际操作和交易验证了以下两个核心场景：
    1.  **场景一 (系统说谎):** 当系统宣称的牌与真实手牌不一致时，`challenge()` 交易成功，前端能正确接收并展示“挑战成功”的结果。
    2.  **场景二 (系统诚实):** 当系统宣称的牌与真实手牌一致时，`challenge()` 交易成功，前端能正确接收并展示“挑战失败”的结果。
- **测试钱包与交易:** 相关的测试交易可在 Sepolia 区块链浏览器上公开查询。

---

## 5. 未来路线图 (The Grand Vision Roadmap)
以下是我们为 Nexus Social 规划的功能迭代路线图，旨在逐步实现我们的宏大愿景。

- **V1.1 (游戏核心完善):**
    - 实现双人对战模式下的完整“Dark Cards”游戏逻辑，包括扑克牌库、洗牌、发牌、叫牌等。
    - 对现有 UI 进行初步优化，并进行代码重构，为后续扩展打下基础。

- **V2.0 (社交与激励):**
    - 上线多人游戏大厅，支持 5-10 名玩家同时在线对战。
    - 推出平台积分系统，用于记录用户参与度和成就。
    - 推出社区管理员专属的邀请系统，通过激励机制驱动平台增长。

- **V3.0 (经济生态闭环):**
    - 进行平台的初始代币发行 (TGE)。
    - 上线代币下注系统，将代币深度融入游戏经济。

- **V-Next (平台生态扩展):**
    - 陆续上线 3-5 款基于 FHE 或其他 Web3 特性的新社交游戏。
    - 最终将核心功能模块化，向第三方开发者开放，成为一个去中心化的社交游戏平台。

---

## 6. 关键交付物清单 (Key Deliverables Checklist)
为确保项目符合 Zama 开发者计划的最高标准，本次 MVP 将交付以下成果：
1. **智能合约:** 部署在 Sepolia 测试网并开源验证的 `TheBlindArbiter.sol` 合约代码。
2. **前端应用:** 一个部署在 Vercel 上的、包含专业首页和完整游戏流程的公开 Demo。
3. **功能验证:** 通过在 Sepolia 测试网的实际交互，验证了核心游戏逻辑的完整性和正确性。
4. **项目文档:** 一份高质量的 `README.md`，清晰阐述项目愿景、使用方法和商业潜力。
5. **演示视频:** 一个精心制作的 2-3 分钟项目介绍与演示视频，将作为你产品展示的核心材料。视频内容将包括：
    - **30s 痛点阐述:** 为什么 Web3 需要一个无法作弊的社交游戏平台？
    - **30s FHE 解决方案:** “Nexus Social”的“机密裁判”是如何工作的？
    - **60s 产品 Demo:** 实际操作前端界面，完成一次完整的“抓包”流程。
    - **30s 未来展望:** 展示项目的平台化 Roadmap 和宏大愿景。
